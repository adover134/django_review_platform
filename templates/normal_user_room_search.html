{% extends 'normal_user_base.html' %}
{% load static %}
{% block left_side_bar %}
    <link rel="stylesheet" href="{% static 'css/normalUserRoomSearchTemplate.css' %}">

    <div id='room_search_form' style="text-align:left;" >
        <form id="search_filter" action="{{normalUserRoomSearch}}" method="get">
            <div id="room_search_filter">
                <span style="display:block; line-height:1; height:100%; font-weight:bolder;">원룸 검색 필터 </span>
            </div>
            <script>
            </script>
            <div id="common_info_form">
                <div id="common_info_filter" style="width:100%; height:21.429%;margin-top:8%;">
                    <span style="display:block; height:100%; line-height:1;">공유 시설</span>
                </div>
                <div id="common_info_selects">
                    <label><input type="checkbox" name="color" value="blue">주차장</label>
                    <label><input type="checkbox" name="color" value="red">엘레베이터</label>
                    <label></label>
                </div>
            </div>
            <div id="built_year_form">
                <div id="built_year_filter">
                    <span style="display:block; line-height:1;">건축 연도</span>
                </div>
                <div id="built_year_selects">
                    <div id="built_year_selects_div">
                        <select id="builtFrom" name="builtFrom"></select>
                            ~
                        <select id="builtTo" name="builtTo"></select>
                    </div>
                </div>
            </div>
            <div>
                <label class = "label">학교와의 거리(km) <input style ="margin-top:3%;" type="range" id="proof" list="tickmarks1" class="range" min="100" max="1000" step="100"></label>
            </div>
            <div style="width:100%;">
            <datalist id="tickmarks1">
                <option value="0.1" label = "0.1"></option>
                <option value="0.2" label = "0.2"></option>
                <option value="0.3" label = "0.3"></option>
                <option value="0.4" label = "0.4"></option>
                <option value="0.5" label = "0.5"></option>
                <option value="0.6" label = "0.6"></option>
                <option value="0.7" label = "0.7"></option>
                <option value="0.8" label = "0.8"></option>
                <option value="0.9" label = "0.9"></option>
                <option value="1" label = "1"></option>
            </datalist>
                </div>
            <br><div>
                <label class = "label">주변 편의시설 수 <input style ="margin-top:3%;" type="range" list="tickmarks2" class="range" min="0" max="5" step="1"></label>
            </div>
            <datalist id="tickmarks2">
                <option value="0" label = "0"></option>
                <option value="1" label = "1"></option>
                <option value="2" label = "2"></option>
                <option value="3" label = "3"></option>
                <option value="4" label = "4"></option>
                <option value="5" label = "5"></option>
            </datalist>
            <div id="text_form">
                <div id="search_address">검색 텍스트</div>
                <div id="address_filter">
                    <input class="form-control" type="search" placeholder="주소 입력" aria-label="Search" id="address2" name="address">
                </div>
                <div id="submit-div">
                    <a href="javascript:(0)" onclick="document.getElementById('search_filter').submit();" id="submit">적용</a>
                </div>
            </div>
        </form>
    </div>
{% endblock %}

{% block main_contents %}
    <div id="rooms_title">
        <div id="rooms_search_title">검색 결과와 유사한 원룸</div>
    </div>
    <div id="rooms_div">
        <div id="rooms">
            {% for room in rooms %}
                <div class="room" onclick="window.location.replace('{{roomRead}}?roomId={{room.id}}')"
                     style="cursor: pointer">
                    <div class="image">
                        {% if room.roomImage %}
                            {% for roomImg in room.roomImage %}
                                <img src="{% static 'images/' %}{{ roomImg }}">
                            {% endfor %}
                            {% else %}
                                <img src="{% static 'images/iconImage/no-photo.png' %}" style="width:100%; height:100%;">
                        {% endif %}
                    </div>
                    <div class="info">
                        <div class="room_address">
                            {{ room.address }}
                        </div>
                        <div class="room_common_info">
                            건축연도:{{ room.builtYear }}
                        </div>
                    </div>
                </div>
            {% endfor %}
        </div>
    </div>
    <script src="{% static 'js/normalUserRoomSearchTemplate.js' %}"></script>
    <script>
        window.onresize = function()
        {
            let a = (document.getElementById('room_search_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('room_search_filter').style.fontSize=a;
            a = (document.getElementById('common_info_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('common_info_filter').style.fontSize=a;
            let b = Array.from(document.getElementById('common_info_selects').children);
            b.forEach(function(o){
                a=o.offsetHeight/16;
                b=o.offsetWidth-o.offsetHeight;
                let c = o.innerText;
                b = (b / c.length)/16;
                if (a > b)
                    o.style.fontSize=b.toString()+'rem';
                else
                    o.style.fontSize=a.toString()+'rem';
            });
            a=(document.getElementById('built_year_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('built_year_filter').style.fontSize=a;
            a=((document.getElementById('builtFrom').offsetHeight-10)/16).toString()+'rem';
            document.getElementById('builtFrom').style.fontSize=a;
            b=((document.getElementById('builtTo').offsetHeight-10)/16).toString()+'rem';
            document.getElementById('builtTo').style.fontSize=b;
            a=(document.getElementById('search_address').offsetHeight/16).toString()+'rem';
            document.getElementById('search_address').style.fontSize=a;
            a=(document.getElementById('submit-div').offsetHeight/16).toString()+'rem';
            document.getElementById('submit').style.fontSize=a;
            a=(document.getElementById('rooms_search_title').offsetHeight/24).toString()+'rem';
            document.getElementById('rooms_search_title').style.fontSize=a;
            b = Array.from(document.getElementsByClassName('room_address'));
            b.forEach(function(o){
                a=(o.offsetHeight/16).toString()+'rem';
                o.style.fontSize=a;
            });
            b = Array.from(document.getElementsByClassName('room_common_info'));
            b.forEach(function(o){
                a=(o.offsetHeight/16).toString()+'rem';
                o.style.fontSize=a;
            });
            a=(document.getElementById('search_address').offsetHeight/16).toString()+'rem';
            document.getElementById('search_address').style.fontSize=a;
        }
        window.onload = function()
        {
            let a = (document.getElementById('room_search_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('room_search_filter').style.fontSize=a;
            a = (document.getElementById('common_info_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('common_info_filter').style.fontSize=a;
            let b = Array.from(document.getElementById('common_info_selects').children);
            b.forEach(function(o){
                a=o.offsetHeight/16;
                b=o.offsetWidth-o.offsetHeight;
                let c = o.innerText;
                b = (b / c.length)/16;
                if (a > b)
                    o.style.fontSize=b.toString()+'rem';
                else
                    o.style.fontSize=a.toString()+'rem';
            });
            a=(document.getElementById('built_year_filter').offsetHeight/16).toString()+'rem';
            document.getElementById('built_year_filter').style.fontSize=a;
            a=((document.getElementById('builtFrom').offsetHeight-10)/16).toString()+'rem';
            document.getElementById('builtFrom').style.fontSize=a;
            b=((document.getElementById('builtTo').offsetHeight-10)/16).toString()+'rem';
            document.getElementById('builtTo').style.fontSize=b;
            a=(document.getElementById('search_address').offsetHeight/16).toString()+'rem';
            document.getElementById('search_address').style.fontSize=a;
            a=(document.getElementById('submit-div').offsetHeight/16).toString()+'rem';
            document.getElementById('submit').style.fontSize=a;
            a=(document.getElementById('rooms_search_title').offsetHeight/24).toString()+'rem';
            document.getElementById('rooms_search_title').style.fontSize=a;
            b = Array.from(document.getElementsByClassName('room_address'));
            b.forEach(function(o){
                a=(o.offsetHeight/16).toString()+'rem';
                o.style.fontSize=a;
            });
            b = Array.from(document.getElementsByClassName('room_common_info'));
            b.forEach(function(o){
                a=(o.offsetHeight/16).toString()+'rem';
                o.style.fontSize=a;
            });
            a=(document.getElementById('search_address').offsetHeight/16).toString()+'rem';
            document.getElementById('search_address').style.fontSize=a;
        }
    </script>
{% endblock %}